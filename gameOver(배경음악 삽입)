import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;

import javax.swing.*;

import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.Clip;

public class gameOver extends JFrame {
    JButton restartbt;// 재시작 버튼

    public gameOver() {
        gameoverFrame();
        cursor();
    }

    public void gameoverFrame() {
        ImageIcon score = new ImageIcon("src/img/score.png");// 스코어 배경 이미지
        restartbt = new JButton(new ImageIcon("src/img/restart-bt.png"));// 재시작 버튼 이미지

        Font font = new Font("고양체", Font.BOLD, 28);

        setTitle("Be My Cafe"); // 프레임 타이틀
        setSize(922, 519); // 프레임 크기
        setResizable(false); // 사이즈 재조정 불가능
        setLocationRelativeTo(null); // 창이 가운데에 뜨도록 함
        setDefaultCloseOperation(EXIT_ON_CLOSE); // 창을 끄면 프로그램을 종료
        setLayout(null);

        JPanel Panel1 = new JPanel() {
            @Override
            protected void paintComponent(Graphics g) {
                super.paintComponent(g);
                g.drawImage(score.getImage(), 0, 0, 922, 519, null);
            }
        };
        Panel1.setLayout(null); // Setting layout to null for manual component placement
        Panel1.setBounds(0, 0, 922, 519);

        // 재시작 버튼
        restartbt.setBounds(340, 358, 241, 101);// 재시작 버튼 사이즈
        restartbt.setBorder(null);// gameover 프레임에 재시작 버튼 넣기
        Panel1.add(restartbt);// 라벨 추가 to Panel1

        // 최종 스코어 라벨
        JLabel fscore = new JLabel("최종 스코어");// 최종 스코어 텍스트 출력
        fscore.setBounds(340, 30, 241, 30);// 최종 스코어 위치 설정
        fscore.setFont(font);// 최종 스코어 텍스트에 고양체 적용
        fscore.setHorizontalAlignment(JLabel.CENTER);// 수평 가운데 정렬
        Panel1.add(fscore);// 라벨 추가 to Panel1

        // 최종 스코어 라벨
        JLabel gameScoreLabel = new JLabel(gameStart.gameScore + "");// 최종 스코어 텍스트에 고양체 적용
        gameScoreLabel.setBounds(340, 60, 241, 30);// 최종 스코어 위치 설정
        gameScoreLabel.setFont(font);// 최종 스코어 텍스트에 고양체 적용
        gameScoreLabel.setHorizontalAlignment(JLabel.CENTER);// 수평 가운데 정렬
        Panel1.add(gameScoreLabel);// 라벨 추가 to Panel1

        add(Panel1); // 스코어 페이지 추가

        setVisible(true);
        
        try {
            File musicFile = new File("C:/Users/SAMSUNG/Downloads/baby-game-mane-without-laughter-8779.wav");

            AudioInputStream audioInputStream = AudioSystem.getAudioInputStream(musicFile);

            Clip clip = AudioSystem.getClip();
            clip.open(audioInputStream);

            clip.loop(Clip.LOOP_CONTINUOUSLY);

            clip.addLineListener(event -> {
                if (event.getType() == javax.sound.sampled.LineEvent.Type.STOP)
                    clip.close();
            });
        } catch (Exception e) {
            e.printStackTrace();
        }

        // 재시작 버튼 클릭 시
        restartbt.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                setVisible(false); // 창 안보이게
                new gameStart();
            }
        });
    }

    public void cursor() {
        Toolkit tk = Toolkit.getDefaultToolkit();
        Image cursorimage = tk.getImage("src/img/cursor.png");
        Point point = new Point(10, 10);
        Cursor cursor = tk.createCustomCursor(cursorimage, point, "");

        this.setCursor(cursor);
    }
}
